<div class="min-h-screen w-full bg-gradient-to-b from-slate-900 via-slate-900 to-slate-950 text-white">
  <!-- Status Bar -->
  <div class="fixed top-0 left-0 right-0 z-50 bg-slate-900/95 backdrop-blur-md border-b border-slate-700/30 px-4 py-3">
    <div class="flex items-center justify-between">
      <!-- Left: Battery & Signal -->
      <div class="flex items-center gap-2 text-xs">
        <div class="flex gap-0.5">
          <div *ngFor="let bar of getSignalBars()" class="w-1 h-3 bg-green-500"></div>
          <div *ngFor="let bar of getSignalEmptyBars()" class="w-1 h-3 bg-slate-600"></div>
        </div>
        <span>{{ deviceStatus.battery | number: '1.0-0' }}%</span>
      </div>

      <!-- Center: Brand -->
      <h1 class="text-lg font-bold text-blue-400">SECUREON</h1>

      <!-- Right: Menu Button -->
      <button
        (click)="toggleMenu()"
        class="p-2 hover:bg-slate-800 rounded-lg transition-colors"
      >
        <span class="material-symbols-outlined text-2xl">menu</span>
      </button>
    </div>

    <!-- Dropdown Menu -->
    <div *ngIf="menuOpen" class="absolute top-16 right-4 bg-slate-800 border border-slate-700 rounded-xl shadow-xl w-48 py-2 animate-in">
      <button
        (click)="goToSettings()"
        class="w-full px-4 py-3 hover:bg-slate-700/50 flex items-center gap-3 text-left transition-colors"
      >
        <span class="material-symbols-outlined">settings</span>
        <span>Configuración</span>
      </button>
      <button
        (click)="goToContacts()"
        class="w-full px-4 py-3 hover:bg-slate-700/50 flex items-center gap-3 text-left transition-colors"
      >
        <span class="material-symbols-outlined">contacts</span>
        <span>Contactos</span>
      </button>
      <hr class="border-slate-700 my-2" />
      <button
        (click)="logout()"
        class="w-full px-4 py-3 hover:bg-red-900/30 flex items-center gap-3 text-left text-red-400 transition-colors"
      >
        <span class="material-symbols-outlined">logout</span>
        <span>Cerrar sesión</span>
      </button>
    </div>
  </div>

  <!-- Main Content -->
  <div class="pt-20 pb-20 px-4">
    <!-- Greeting Section -->
    <div class="mb-8">
      <h2 class="text-2xl font-bold mb-2">{{ getUserGreeting() }}, <span class="text-blue-400">{{ currentUser?.nombre || 'Usuario' }}</span></h2>
      <p class="text-slate-400">Tu dispositivo está protegido</p>
    </div>

    <!-- Device Status Cards -->
    <div class="grid grid-cols-2 gap-4 mb-8">
      <!-- GPS Status -->
      <div class="bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-2xl p-4">
        <div class="flex items-center justify-between mb-2">
          <span class="text-xs font-medium text-slate-400">GPS</span>
          <span [ngClass]="getStatusColor(deviceStatus.gps)" class="text-sm font-bold">
            {{ deviceStatus.gps ? 'Activo' : 'Inactivo' }}
          </span>
        </div>
        <span class="material-symbols-outlined text-4xl text-blue-500">location_on</span>
      </div>

      <!-- Network Status -->
      <div class="bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-2xl p-4">
        <div class="flex items-center justify-between mb-2">
          <span class="text-xs font-medium text-slate-400">Red</span>
          <span [ngClass]="getStatusColor(deviceStatus.network)" class="text-sm font-bold">
            {{ deviceStatus.network ? 'Conectado' : 'Desconectado' }}
          </span>
        </div>
        <span class="material-symbols-outlined text-4xl text-green-500">network_check</span>
      </div>
    </div>

    <!-- Last Location -->
    <div class="bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-2xl p-4 mb-8">
      <div class="flex items-center justify-between mb-2">
        <span class="text-xs font-medium text-slate-400">Última localización</span>
        <span class="material-symbols-outlined text-sm text-blue-400">my_location</span>
      </div>
      <p class="text-sm font-mono text-slate-300">{{ getLocationDisplay() }}</p>
    </div>

    <!-- Alarm Status -->
    <div class="bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-2xl p-4 mb-12">
      <div class="flex items-center justify-between">
        <div>
          <span class="text-xs font-medium text-slate-400 block mb-1">Estado de Alarma</span>
          <span [ngClass]="alarmActive ? 'text-red-400' : 'text-green-400'" class="text-sm font-bold">
            {{ alarmActive ? 'ACTIVA' : 'Desactivada' }}
          </span>
        </div>
        <span class="material-symbols-outlined text-4xl" [ngClass]="alarmActive ? 'text-red-500' : 'text-green-500'">
          {{ alarmActive ? 'notifications_active' : 'notifications' }}
        </span>
      </div>
    </div>
  </div>

  <!-- Floating Action Button - Activate Alarm -->
  <button
    (click)="activateAlarm()"
    [disabled]="loadingAlarm || alarmActive"
    class="fixed bottom-6 left-1/2 -translate-x-1/2 w-24 h-24 rounded-full bg-gradient-to-br from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 disabled:from-red-600/50 disabled:to-red-700/50 shadow-2xl flex items-center justify-center transition-all transform hover:scale-105 z-40"
  >
    <div class="flex flex-col items-center gap-1">
      <span class="material-symbols-outlined text-4xl">emergency</span>
      <span class="text-xs font-bold uppercase">Alarma</span>
    </div>
  </button>

  <!-- Quick Actions Floating Menu (Optional) -->
  <div class="fixed bottom-36 right-4 flex flex-col gap-3 z-30">
    <button
      (click)="goToContacts()"
      class="w-14 h-14 rounded-full bg-slate-800 border border-slate-700 hover:bg-slate-700 shadow-lg flex items-center justify-center transition-all transform hover:scale-105"
      title="Contactos"
    >
      <span class="material-symbols-outlined">contacts</span>
    </button>
    <button
      (click)="goToSettings()"
      class="w-14 h-14 rounded-full bg-slate-800 border border-slate-700 hover:bg-slate-700 shadow-lg flex items-center justify-center transition-all transform hover:scale-105"
      title="Configuración"
    >
      <span class="material-symbols-outlined">settings</span>
    </button>
  </div>
</div>
